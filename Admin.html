<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: –°—Ç—Ä–∞–π–∫–±–æ–ª—å–Ω–æ–µ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Flowbite -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>

<style>
body { background: linear-gradient(to right, #0f0c29, #302b63, #24243e); color: #fff; }
.sidebar a { display:block; padding:12px 16px; border-radius:8px; margin-bottom:6px; transition:0.3s; }
.sidebar a:hover { background: rgba(255,215,0,0.2); color: #ffd700; }
.table-wrapper { overflow-x:auto; }
.fade-in { opacity:0; transform:translateY(20px); transition:0.5s ease-out; }
.fade-in.show { opacity:1; transform:translateY(0); }
</style>
</head>
<body>

<!-- Top Navbar -->
<nav class="bg-black bg-opacity-80 shadow p-4 flex justify-between items-center fixed w-full z-20">
  <div class="text-xl font-bold text-yellow-500">Airsoft Shop | Admin</div>
  <button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg" onclick="logout()">–í—ã–π—Ç–∏</button>
</nav>

<div class="flex pt-16 min-h-screen">

  <!-- Sidebar -->
  <aside class="w-64 sidebar p-6 bg-gray-900/80 backdrop-blur-md">
    <a href="#" onclick="showSection('products')">üì¶ –¢–æ–≤–∞—Ä—ã</a>
    <a href="#" onclick="showSection('users')">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
  </aside>

  <!-- Content -->
  <main class="flex-1 p-6 space-y-6">

    <!-- –°–µ–∫—Ü–∏—è –¢–æ–≤–∞—Ä—ã -->
    <section id="productsSection" class="fade-in">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold text-yellow-400">–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h2>
        <button onclick="openModal()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
      </div>
      <div class="table-wrapper bg-gray-800 rounded-lg shadow">
        <table class="min-w-full text-left text-white">
          <thead class="bg-gray-700">
            <tr>
              <th class="px-4 py-2">#</th>
              <th class="px-4 py-2">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
              <th class="px-4 py-2">–û–ø–∏—Å–∞–Ω–∏–µ</th>
              <th class="px-4 py-2">–¶–µ–Ω–∞</th>
              <th class="px-4 py-2">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody id="productsTable"></tbody>
        </table>
      </div>
    </section>

    <!-- –°–µ–∫—Ü–∏—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
    <section id="usersSection" class="fade-in hidden">
      <h2 class="text-2xl font-bold text-yellow-400 mb-4">–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
      <div class="table-wrapper bg-gray-800 rounded-lg shadow">
        <table class="min-w-full text-left text-white">
          <thead class="bg-gray-700">
            <tr>
              <th class="px-4 py-2">#</th>
              <th class="px-4 py-2">–ò–º—è</th>
              <th class="px-4 py-2">Email</th>
              <th class="px-4 py-2">–†–æ–ª—å</th>
              <th class="px-4 py-2">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody id="usersTable"></tbody>
        </table>
      </div>
    </section>

  </main>
</div>

<!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
<div id="productModal" tabindex="-1" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-gray-900 p-6 rounded-xl w-full max-w-md">
    <h3 id="modalTitle" class="text-xl font-bold text-yellow-400 mb-4">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h3>
    <form id="productForm" class="space-y-4">
      <input type="hidden" id="productId">
      <input type="text" id="productName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" class="w-full p-2 rounded bg-gray-800" required>
      <textarea id="productDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" class="w-full p-2 rounded bg-gray-800" required></textarea>
      <input type="number" id="productPrice" placeholder="–¶–µ–Ω–∞" class="w-full p-2 rounded bg-gray-800" required>
      <input type="url" id="productImg" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" class="w-full p-2 rounded bg-gray-800" required>
      <div class="flex justify-between space-x-2">
        <button type="button" onclick="closeModal()" class="w-1/2 bg-gray-600 hover:bg-gray-700 text-white py-2 rounded">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" class="w-1/2 bg-yellow-500 hover:bg-yellow-600 text-black py-2 rounded font-bold">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
  </div>
</div>

<script>
// –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
document.querySelectorAll('.fade-in').forEach(el=>{
  setTimeout(()=>el.classList.add('show'),100);
});

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π
function showSection(section){
  document.getElementById('productsSection').classList.add('hidden');
  document.getElementById('usersSection').classList.add('hidden');
  if(section==='products') document.getElementById('productsSection').classList.remove('hidden');
  if(section==='users') document.getElementById('usersSection').classList.remove('hidden');
}

// –í—ã—Ö–æ–¥
function logout(){ window.location.href = 'Authorization.html'; }

// –î–∞–Ω–Ω—ã–µ
let productsData = [
  {id:1,name:'Glock 19',desc:'–ì–∞–∑–æ–≤—ã–π –ø–∏—Å—Ç–æ–ª–µ—Ç',price:7000,img:""},
  {id:2,name:'AK74M',desc:'–≠–ª–µ–∫—Ç—Ä–æ–ø–Ω–µ–≤–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∏–Ω—Ç–æ–≤–∫–∞',price:18900,img:""}
];
const usersData = [
  {id:1,name:'–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',email:'ivan@mail.ru',role:'Admin'},
  {id:2,name:'–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤',email:'petr@mail.ru',role:'User'}
];

// –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤
const productsTable = document.getElementById('productsTable');

// –ú–æ–¥–∞–ª–∫–∞
const modal = document.getElementById("productModal");
const modalTitle = document.getElementById("modalTitle");
const productForm = document.getElementById("productForm");

function openModal(edit = false, product = null) {
  modal.classList.remove("hidden");
  if(edit && product){
    modalTitle.textContent = "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä";
    document.getElementById("productId").value = product.id;
    document.getElementById("productName").value = product.name;
    document.getElementById("productDesc").value = product.desc;
    document.getElementById("productPrice").value = product.price;
    document.getElementById("productImg").value = product.img || "";
  } else {
    modalTitle.textContent = "–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä";
    productForm.reset();
    document.getElementById("productId").value = "";
  }
}

function closeModal() {
  modal.classList.add("hidden");
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
productForm.addEventListener("submit", (e)=>{
  e.preventDefault();
  const id = document.getElementById("productId").value;
  const newProduct = {
    id: id ? parseInt(id) : Date.now(),
    name: document.getElementById("productName").value,
    desc: document.getElementById("productDesc").value,
    price: document.getElementById("productPrice").value,
    img: document.getElementById("productImg").value
  };
  
  if(id){ 
    const index = productsData.findIndex(p=>p.id==id);
    productsData[index] = newProduct;
  } else {
    productsData.push(newProduct);
  }
  
  renderProducts();
  closeModal();
});

// –†–µ–Ω–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤
function renderProducts(){
  productsTable.innerHTML="";
  productsData.forEach((p,i)=>{
    const row = document.createElement('tr');
    row.className='border-b border-gray-700';
    row.innerHTML = `
      <td class="px-4 py-2">${i+1}</td>
      <td class="px-4 py-2">${p.name}</td>
      <td class="px-4 py-2">${p.desc}</td>
      <td class="px-4 py-2">${p.price} ‚ÇΩ</td>
      <td class="px-4 py-2 space-x-2">
        <button class="text-blue-400 hover:underline" onclick='openModal(true, ${JSON.stringify(p)})'>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        <button class="text-red-500 hover:underline" onclick='deleteProduct(${p.id})'>–£–¥–∞–ª–∏—Ç—å</button>
      </td>`;
    productsTable.appendChild(row);
  });
}

function deleteProduct(id){
  if(confirm("–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä?")){
    const index = productsData.findIndex(p=>p.id==id);
    if(index>-1) productsData.splice(index,1);
    renderProducts();
  }
}

// –†–µ–Ω–¥–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const usersTable = document.getElementById('usersTable');
usersData.forEach((u,i)=>{
  const row = document.createElement('tr');
  row.className='border-b border-gray-700';
  row.innerHTML = `<td class="px-4 py-2">${i+1}</td>
    <td class="px-4 py-2">${u.name}</td>
    <td class="px-4 py-2">${u.email}</td>
    <td class="px-4 py-2">${u.role}</td>
    <td class="px-4 py-2 space-x-2">
      <button class="text-blue-400 hover:underline">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
      <button class="text-red-500 hover:underline">–£–¥–∞–ª–∏—Ç—å</button>
    </td>`;
  usersTable.appendChild(row);
});

// –ü–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤
renderProducts();
</script>

</body>
</html>
